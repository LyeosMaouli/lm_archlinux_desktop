# Zram configuration for swap
# Generated by Ansible - DO NOT EDIT MANUALLY
# Host: {{ ansible_hostname | default('localhost') }}
# Generated: {{ ansible_date_time.iso8601 | default('unknown') }}

[zram0]
zram-size = {{ swap.zram.size }}
compression-algorithm = zstd
max-zram-size = {{ (swap.zram.size | regex_replace('G', '') | int * 1024) }}M

{% if storage is defined and storage.swap is defined and storage.swap.type == 'hybrid' %}
# Hybrid swap configuration: zram + swapfile
# This zram device complements the hibernation swapfile
{% endif %}

# Performance tuning
# zstd provides good compression ratio with reasonable CPU usage
# For lower CPU usage, consider 'lz4' algorithm
# For better compression, consider 'lzo-rle' algorithm