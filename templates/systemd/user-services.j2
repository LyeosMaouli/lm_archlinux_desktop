# User Services Configuration Template
# Generated by Arch Linux Desktop Automation
# Date: {{ ansible_date_time.iso8601 }}

[Unit]
Description={{ service_description | default('User Service') }}
After={{ service_after | default('graphical-session.target') }}
Wants={{ service_wants | default('graphical-session.target') }}
{% if service_requires is defined %}
Requires={{ service_requires }}
{% endif %}

[Service]
Type={{ service_type | default('simple') }}
{% if service_user is defined %}
User={{ service_user }}
{% endif %}
{% if service_group is defined %}
Group={{ service_group }}
{% endif %}
{% if service_working_directory is defined %}
WorkingDirectory={{ service_working_directory }}
{% endif %}
{% if service_environment is defined %}
{% for env_var in service_environment %}
Environment="{{ env_var }}"
{% endfor %}
{% endif %}
{% if service_exec_start is defined %}
ExecStart={{ service_exec_start }}
{% endif %}
{% if service_exec_stop is defined %}
ExecStop={{ service_exec_stop }}
{% endif %}
{% if service_exec_reload is defined %}
ExecReload={{ service_exec_reload }}
{% endif %}
Restart={{ service_restart | default('on-failure') }}
RestartSec={{ service_restart_sec | default('5') }}
{% if service_timeout_start_sec is defined %}
TimeoutStartSec={{ service_timeout_start_sec }}
{% endif %}
{% if service_timeout_stop_sec is defined %}
TimeoutStopSec={{ service_timeout_stop_sec }}
{% endif %}

[Install]
WantedBy={{ service_wanted_by | default('default.target') }}