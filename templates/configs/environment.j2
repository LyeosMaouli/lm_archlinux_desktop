# Environment configuration template
# Generated by Ansible for {{ ansible_hostname }}

# Wayland environment variables
export XDG_SESSION_TYPE=wayland
export XDG_CURRENT_DESKTOP=Hyprland
export XDG_SESSION_DESKTOP=Hyprland

# Qt Wayland support
export QT_QPA_PLATFORM=wayland
export QT_WAYLAND_DISABLE_WINDOWDECORATION=1
export QT_AUTO_SCREEN_SCALE_FACTOR=1

# GTK Wayland support
export GDK_BACKEND=wayland,x11

# SDL Wayland support
export SDL_VIDEODRIVER=wayland

# Java AWT support for Wayland
export _JAVA_AWT_WM_NONREPARENTING=1

# Firefox Wayland support
export MOZ_ENABLE_WAYLAND=1

# Electron apps Wayland support
export ELECTRON_OZONE_PLATFORM_HINT=wayland

# XDG directories
export XDG_CONFIG_HOME={{ xdg_config_home | default('$HOME/.config') }}
export XDG_DATA_HOME={{ xdg_data_home | default('$HOME/.local/share') }}
export XDG_CACHE_HOME={{ xdg_cache_home | default('$HOME/.cache') }}

# Locale settings
export LANG={{ system_locale | default('en_US.UTF-8') }}
export LC_ALL={{ system_locale | default('en_US.UTF-8') }}

# Keyboard layout
export XKB_DEFAULT_LAYOUT={{ keyboard_layout | default('fr') }}
export XKB_DEFAULT_VARIANT={{ keyboard_variant | default('') }}

# Hardware acceleration
{% if enable_hardware_accel | default(true) %}
export LIBVA_DRIVER_NAME={{ va_driver | default('iHD') }}
export VDPAU_DRIVER={{ vdpau_driver | default('va_gl') }}
{% endif %}

# Audio
export PIPEWIRE_LATENCY={{ audio_latency | default('128/48000') }}

# Development tools
{% if development_mode | default(false) %}
export EDITOR={{ editor | default('code') }}
export BROWSER={{ browser | default('firefox') }}
export TERMINAL={{ terminal | default('kitty') }}
{% endif %}

# Custom environment variables
{% if custom_env_vars is defined %}
{% for key, value in custom_env_vars.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
{% endif %}